"use strict";const c=require("./request.js"),o="https://api.coze.cn/v1/workflow/run",r=e=>{if(!e||!e.workflow_id)return Promise.reject(new Error("工作流ID不能为空"));const i={workflow_id:e.workflow_id,parameters:e.parameters||{},is_async:e.is_async||!1};return e.bot_id&&(i.bot_id=e.bot_id),e.ext&&(i.ext=e.ext),e.app_id&&(i.app_id=e.app_id),c.request.post(o,i,{header:{"Content-Type":"application/json"},timeout:12e4}).then(t=>t.code===0?{success:!0,data:t.data,execute_id:t.execute_id,debug_url:t.debug_url,is_async:e.is_async||!1}:Promise.reject({success:!1,code:t.code,message:t.msg||"执行工作流失败"})).catch(t=>Promise.reject({success:!1,message:t.errMsg||"网络请求异常",error:t}))};exports.runWorkflow=r;
